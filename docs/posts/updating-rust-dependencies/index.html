<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
    name="description"
    content=""
  />
  
    
      <title>Updating a Rust Project to Latest Dependencies | Max Clinton</title>
    
  
  <link rel="stylesheet" href="/css/reset.css"/>
  <link rel="stylesheet" href="/css/font.css"/>
  <link rel="stylesheet" href="/css/smigle.css"/>
  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
</head>

  <body>
    <header>

  <nav>
    
      
        
        <a href="/"><b>Home</b></a>
      
         | 
        <a href="/about/"><b>About</b></a>
      
         | 
        <a href="/posts/"><b>Posts</b></a>
      
         | 
        <a href="/categories/"><b>Categories</b></a>
      
         | 
        <a href="/tags/"><b>Tags</b></a>
      
    
  </nav>
  <hr />
</header>

    <div id="content">
      
  <main>
    <article>
      <h1>Updating a Rust Project to Latest Dependencies</h1>
      <div class="post-meta">
  <strong>
    <span>Posted on</span>
    <time>2025-11-05</time>
    <span>in</span>
    
      <a href="/categories/rust">rust</a>, 
      <a href="/categories/ai">ai</a>
  </strong>
  <span> • 481 words</span>
  <span> • 3 minute read</span>
  
  
    <div>
      <span>Tags:</span>
      
        <a href="/tags/rust">rust</a>, 
        <a href="/tags/cursor">cursor</a>, 
        <a href="/tags/dependencies">dependencies</a>
    </div>
  
</div>

      <div><p>I recently updated an older Rust project (<a href="https://github.com/mtclinton/termdex">termdex</a>, a terminal-based Pokédex) to use the latest package versions. Here&rsquo;s what I ran into and how I fixed it.</p>
<h2 id="the-starting-point">The Starting Point</h2>
<p>The project was using older versions of most dependencies:</p>
<ul>
<li><code>ratatui</code> 0.26 (still named <code>tui</code> in Cargo.toml)</li>
<li><code>diesel</code> 2.0.0</li>
<li><code>crossterm</code> 0.26</li>
<li><code>reqwest</code> 0.11</li>
<li>And several others</li>
</ul>
<p>The goal was to get everything up to the latest stable versions while keeping the project functional.</p>
<h2 id="major-updates">Major Updates</h2>
<h3 id="ratatui-migration">Ratatui Migration</h3>
<p>The biggest change was moving from <code>ratatui</code> 0.27 to 0.29. The library had several API changes:</p>
<ul>
<li><strong>Frame generics</strong>: <code>Frame&lt;B&gt;</code> became just <code>Frame</code> (no generic parameter)</li>
<li><strong>Area method</strong>: <code>f.size()</code> → <code>f.area()</code></li>
<li><strong>Cursor positioning</strong>: <code>f.set_cursor()</code> → <code>f.set_cursor_position()</code> (takes a tuple now)</li>
<li><strong>Text API</strong>: <code>Spans</code> was replaced with <code>Line</code>. Code like <code>Text::from(Spans::from(...))</code> became <code>Text::from(vec![Line::from(...)])</code></li>
<li><strong>Wrap API</strong>: <code>Wrap { trim: true }</code> works, but <code>Wrap::trim()</code> doesn&rsquo;t exist in 0.29</li>
</ul>
<h3 id="diesel-macros">Diesel Macros</h3>
<p>Diesel 2.1 deprecated the old <code>#[table_name = &quot;...&quot;]</code> syntax. I updated all models to use the new format:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#75715e">// Old
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e">#[table_name = </span><span style="color:#e6db74">&#34;pokemon&#34;</span><span style="color:#75715e">]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">NewPokemon</span> { <span style="color:#f92672">..</span>. }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// New
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e">#[diesel(table_name = pokemon)]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">NewPokemon</span> { <span style="color:#f92672">..</span>. }
</span></span></code></pre></div><h3 id="version-conflicts">Version Conflicts</h3>
<p>The trickiest part was resolving version conflicts between dependencies:</p>
<ul>
<li><code>tui-input</code> 0.8 used <code>crossterm</code> 0.27, but <code>ratatui</code> 0.29 needs <code>crossterm</code> 0.28</li>
<li>Solution: Updated <code>tui-input</code> to 0.14, which supports <code>crossterm</code> 0.28</li>
<li><code>ansi-to-tui</code> had similar issues—upgraded from 3.0 to 7.0 to match <code>ratatui</code> 0.29</li>
</ul>
<h3 id="docker-updates">Docker Updates</h3>
<p>The Dockerfiles needed Rust 1.86 to compile the latest <code>diesel_cli</code> (2.3.3). Updated both Dockerfiles from <code>rust:1.82</code> to <code>rust:1.86</code>.</p>
<h2 id="common-issues">Common Issues</h2>
<ol>
<li><strong>Borrow checker</strong>: Had to clone <code>Text</code> objects before passing them to widgets when they&rsquo;re used later</li>
<li><strong>Unused variables</strong>: Some loops had <code>index</code> that wasn&rsquo;t used, but in one case it was actually needed for array indexing</li>
<li><strong>Deprecated methods</strong>: Various method renames and API changes that required grep searches through the codebase</li>
</ol>
<h2 id="the-process">The Process</h2>
<p>I used Cursor&rsquo;s AI assistant to help with this. The workflow was:</p>
<ol>
<li>Update Cargo.toml with target versions</li>
<li>Run <code>cargo build</code> to see errors</li>
<li>Fix compilation errors one by one</li>
<li>Repeat until it builds</li>
</ol>
<p>The AI was helpful for finding all the places that needed changes (like searching for <code>f.size()</code> or <code>#[table_name</code>), but you still need to understand the codebase structure to make the right fixes.</p>
<h2 id="final-result">Final Result</h2>
<p><img src="termdex.gif" alt="termdex"></p>
<p>After updating:</p>
<ul>
<li><code>ratatui</code>: 0.27 → 0.29</li>
<li><code>crossterm</code>: 0.27 → 0.28</li>
<li><code>diesel</code>: 2.0.0 → 2.1</li>
<li><code>reqwest</code>: 0.11 → 0.12</li>
<li><code>tui-input</code>: 0.8 → 0.14</li>
<li><code>ansi-to-tui</code>: 3.0 → 7.0</li>
</ul>
<p>Everything compiles and works. The warnings about unused imports and results are still there, but those are non-blocking.</p>
<h2 id="takeaways">Takeaways</h2>
<ol>
<li><strong>Read the error messages carefully</strong>—they often point to exactly what needs changing</li>
<li><strong>Update in stages</strong>—don&rsquo;t try to update everything at once</li>
<li><strong>Version conflicts are common</strong>—dependencies often have their own version requirements</li>
<li><strong>Keep Dockerfiles in sync</strong>—Rust version requirements can break builds</li>
</ol>
<p>The whole process took a couple of hours, mostly spent fixing API changes and resolving version conflicts. The code is now on modern, maintained versions of all dependencies.</p>
</div>
    </article>
  </main>

    </div>
    <footer>
  <hr />
  
    <p id="social">
      Find me around the web:
      <br />
      
        
        <a href="https://github.com/mtclinton">GitHub</a>
      
         | 
        <a href="https://gitlab.com/mtclinton">GitLab</a>
      
    </p>
  

</footer>

  </body>
</html>
